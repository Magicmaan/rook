CREATE TABLE IF NOT EXISTS applications (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    file_path TEXT UNIQUE NOT NULL,
    file_type TEXT NOT NULL, -- desktopfile, web, terminal command etc. 
    terminal BOOLEAN NOT NULL DEFAULT 0,
    modified_at DATETIME DEFULT CURRENT_TIMESTAMP
);
CREATE VIRTUAL TABLE IF NOT EXISTS applications_fts USING fts5(
    name,
    content='applications',
    content_rowid='id',
    tokenize='ascii trigram'
);

CREATE INDEX IF NOT EXISTS idx_applications_name ON applications (name);

CREATE TABLE IF NOT EXISTS tags (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    description TEXT
);
CREATE INDEX IF NOT EXISTS idx_tags_name ON tags (name);

CREATE TABLE IF NOT EXISTS application_tags (
    application_id INTEGER NOT NULL,
    tag_id INTEGER NOT NULL,
    FOREIGN KEY (application_id) REFERENCES applications(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
);